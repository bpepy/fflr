---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning = FALSE,
  message = FALSE,
  error = FALSE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  dpi = 300
)
```

# fflr <img src="man/figures/logo.png" align="right" width="120" />

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/fflr)](https://CRAN.R-project.org/package=fflr)
<!-- badges: end -->

The `fflr` package is used to query the [ESPN Fantasy Football API](https://fantasy.espn.com/apis/v3/games/ffl/), (for both the current andpast seasons) and format the results into [_tidy_ data frames](https://vita.had.co.nz/papers/tidy-data.pdf).

## Installation

You can install the released version of `fflr` from [GitHub](https://github.com) with:

``` r
# install.packages("remotes")
remotes::install_github("kiernann/fflr")
```

## Usage

Here we see how we can chain together `fantasy_*()` and `form_*()` functions
to plot the weekly scores of each team in a stacked bar chart.

```{r score_plot, fig.height=5, fig.width=9}
library(tidyverse)
library(fflr)

gaa <- extract_lid("https://fantasy.espn.com/football/team?leagueId=252353&teamId=6")
teams <- form_teams(data = fantasy_members(lid = gaa))
scores <- form_matchup(data = fantasy_matchup(lid = gaa))

right_join(scores, teams) %>% 
  ggplot(aes(x = reorder(abbrev, score), y = score)) +
  geom_col(aes(fill = week)) +
  scale_fill_brewer(palette = "Dark2", guide = guide_legend(reverse = TRUE)) +
  labs(title = "Fantasy Football Scores", x = "team") +
  theme(legend.position = "bottom") +
  coord_flip()
```

